# MikuMikuWorld プロジェクト分析

## 1. プロジェクト概要

このプロジェクトは「MikuMikuWorld」という名前の、C++で開発されたWindows向けデスクトップアプリケーションです。ファイル構造やソースコードの命名（`Score`, `Note`, `Tempo`, `SusExporter`など）から、主に音楽ゲームの譜面を作成・編集するためのエディタであると強く推測されます。

UIフレームワークとしてDear ImGuiを採用しており、グラフィックスAPIとしてOpenGLを利用しています。Visual Studioのソリューションファイル（`.sln`）が含まれていることから、主要な開発環境はVisual Studioです。

## 2. 主要機能

ソースコードから推測される主要な機能は以下の通りです。

- **譜面編集機能**: タイムラインベースのUIでノーツの配置、編集、削除が可能。
- **多種なノーツ**: 通常のタップノーツに加え、ホールドノーツや特殊ノーツ（Flick, Damageなど）を扱えるようです。
- **テンポと拍子の管理**: 曲中でのBPM変更や拍子変更に対応しています。
- **SUSフォーマット対応**: `SusParser`および`SusExporter`の存在から、`SUS`という譜面フォーマットのインポートおよびエクスポート機能を備えていることがわかります。
- **音声再生**: `miniaudio`ライブラリを利用して、譜面に合わせて音楽を再生する機能があります。
- **Undo/Redo**: `HistoryManager`があり、編集操作の取り消し・やり直しが可能です。
- **多言語対応**: `Localization`や`i18n`ディレクトリの存在から、UIの多言語対応（恐らく英語と日本語）が行われています。
- **設定の永続化**: `ApplicationConfiguration`があり、ユーザー設定をファイルに保存・読込する機能を持っています。

## 3. 技術スタック

本プロジェクトで使用されている主要な言語、ライブラリ、ツールは以下の通りです。

- **言語**: C++
- **主要ライブラリ・フレームワーク**:
    - **Dear ImGui**: GUIフレームワーク。エディタのUI全体を構築しています。
    - **GLFW**: ウィンドウ作成と入力管理。
    - **glad**: OpenGLの関数ポインタをロードするためのライブラリ。
    - **OpenGL**: 2D/3Dグラフィックスのレンダリング。
    - **miniaudio**: クロスプラットフォームのオーディオ再生・録音ライブラリ。
    - **nlohmann/json**: 設定ファイルやデータ交換用のJSONパーサー。
    - **stb_image / stb_image_write**: 画像ファイルの読み込み・書き出し。
    - **stb_vorbis**: Ogg Vorbis形式の音声ファイルをデコードするために使用。
    - **DirectXMath**: 3D演算用の算術ライブラリ。

## 4. プロジェクト構造

- `MikuMikuWorld/`: アプリケーションのメインとなるソースコードが格納されています。
    - `Rendering/`: OpenGLを使った描画関連のクラス群。
    - `Audio/`: `miniaudio`をラップした音声関連のクラス群。
    - `res/`: シェーダー、フォント、テクスチャ、音声などのリソースファイル。
- `Depends/`: 外部の依存ライブラリが格納されています。
- `Licenses/`: 依存ライブラリのライセンスファイル。
- `MikuMikuWorld.sln`: Visual Studioソリューションファイル。
- `作りかけ/`: ユーザーが作成中の譜面ファイルなどを保存するディレクトリのようです。

## 5. ビルドシステム

- **Visual Studio (MSVC)**: `.sln`および`.vcxproj`ファイルから、Windows向けのビルドにはVisual Studioが使われます。
- **ターゲットプラットフォーム**: `x64`ディレクトリの存在から、64-bit版Windowsがメインターゲットです。

## 6. 結論

MikuMikuWorldは、C++とモダンなライブラリ群を効果的に活用して作られた、高機能な音楽ゲーム譜面エディタです。コードは機能ごとに適切にモジュール化されており、拡張性やメンテナンス性も考慮されているように見受けられます。特に、Dear ImGuiを全面的に採用することで、複雑な編集UIを効率的に実装している点が特徴的です。
